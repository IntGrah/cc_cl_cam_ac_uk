(this["webpackJsonpcompiler-explorer"]=this["webpackJsonpcompiler-explorer"]||[]).push([[0],{20:function(e,n,t){},49:function(e,n,t){},67:function(e,n,t){},68:function(e,n,t){"use strict";t.r(n);var r=t(0),i=t.n(r),a=t(28),o=t.n(a),c=(t(49),t(3)),s=t(72),u=t(24),l={keywords:["true","false","ref","inl","inr","fst","snd","case","of","if","then","else","let","fun","in","begin","end","while","do","()"],typeKeywords:["int","bool","unit","banter"],operators:[",",":",";","+","-","*","/","~","=",":=","<","&&","||","|","->","?","!","()"],symbols:/[=><!~?:&|+\-*/^%]+/,escapes:/\\/,tokenizer:{root:[[/[a-z_$][\w$]*/,{cases:{"@typeKeywords":"keyword","@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w$]*/,"type.identifier"],{include:"@whitespace"},[/[{}()[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/\d*\.\d+([eE][-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F]+/,"number.hex"],[/\d+/,"number"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],comment:[[/[^(*]+/,"comment"],[/\(\*/,"comment","@push"],["\\*\\)","comment","@pop"],[/[(*]/,"comment"]],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"],[/\(\*/,"comment","@comment"]]}},d={fib:"let fib( m : int) : int =\n    if m = 0\n    then 1\n    else if m = 1\n        then 1\n        else fib (m - 1) + fib (m -2)\n        end\n    end\nin\n    fib(1)\nend",fun:"(* the reason we need closures on the heap ... *) \n\nlet f(y : int) : int -> int =\n  let g(x :int) : int = y + x in g end\nin\n  let add21 : int -> int  = f(21) in\n      let add17 : int -> int  = f(17) in\n         add17(3) + add21(60)\n       end\n  end\nend",gcd:"let gcd(p : int * int) : int =\n    let m : int = fst p in\n       let  n : int = snd p in\n          if m = n\n          then m\n          else if m < n\n               then gcd(m, n - m)\n               else gcd(m - n, n)\n               end\n           end\n       end\n     end\nin\n   let x : int = 10 in\n      let  y : int = 2 in gcd(x, y) end\n    end\nend"},j=function(e,n){var t=Object(r.useRef)((function(){}));Object(r.useEffect)((function(){t.current=function(t){e.includes(t.key)&&(null===n||void 0===n||n(t))}}),[e,n]),Object(r.useEffect)((function(){var e=function(e){t.current(e)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[])},b=t(5),p=t(1),h=function(e){var n=Object(r.useState)({})[1],t=e.decorations,i=Object(r.useRef)(),a=Object(r.useRef)(),o=Object(r.useRef)(e.onMouseMove);o.current=e.onMouseMove;var c=Object(r.useRef)(e.onMouseLeave);c.current=e.onMouseLeave;var s=Object(r.useRef)(e.onKeyDown);return Object(r.useEffect)((function(){s.current=e.onKeyDown}),[e.onKeyDown]),Object(r.useEffect)((function(){t&&i.current&&a.current&&n((function(e){var n;return null===(n=i.current)||void 0===n?void 0:n.deltaDecorations(e,t(i.current,a.current))}))}),[t,n]),Object(p.jsx)(u.a,Object(b.a)(Object(b.a)({},e),{},{onMount:function(r,u){r.onMouseMove((function(e){o.current&&o.current(e)})),r.onMouseLeave((function(e){c.current&&c.current(e)})),e.onMount&&e.onMount(r,u),function(e,r){i.current=e,a.current=r,t&&n((function(e){var n;return null===(n=i.current)||void 0===n?void 0:n.deltaDecorations(e,t(i.current,a.current))}))}(r,u),r.onKeyDown((function(e){var n=e.browserEvent;s.current&&s.current(n)}))}}))},f=t(73);t(20);function v(e,n,t){return function(r){switch(r){case"ArrowRight":n(((e+1)%t+t)%t);break;case"ArrowLeft":n(((e-1)%t+t)%t)}}}var g=function(e){var n=e.values,t=e.index,r=e.setIndex,i=n.length,a=v(t,r,i);return j(["ArrowRight","ArrowLeft"],(function(e){return a(e.key)})),Object(p.jsxs)("div",{className:"progress",children:[Object(p.jsx)("button",{onClick:function(){return r(((t-1)%i+i)%i)},children:"<"}),Object(p.jsx)(f.a,{selectedIndex:t,values:n,appearance:"inverted",onSelect:function(e){var n=e.index;return r?r(n):null}}),Object(p.jsx)("button",{onClick:function(){return r(((t+1)%i+i)%i)},children:">"})]})},O=t(19);function m(e){return{steps:JSON.parse(e.steps).reverse(),next:function(){return m(e.next())}}}var x=function(e){return JSON.parse(slang.interp2Code(e))},w=function(e){return JSON.parse(slang.interp3Code(e))},k=function(e){return JSON.parse(slang.jargonCode(e))},y=function(e){return m(slang.i2Stream(e))},S=function(e){var n=slang.i3Stream(e);return{code:n.code,stepStream:m(n.stepStream)}},N=function(e){var n=slang.jargonStream(e),t=n.code,r=n.stepStream;return{code:JSON.parse(t),stepStream:m(r)}};function D(e){return e.map((function(e){var n=Object(c.a)(e,2);n[0];return n[1]})).join("\n")}var C=function(e){return e.map((function(e,n){return e.length>40?e.split("\n").join(" ").slice(0,40)+"...":e}))},L=function(e){var n=e.source,t=e.onClose,i=Object(r.useState)(y(n)),a=Object(c.a)(i,2),o=a[0],s=o.steps,u=o.next,l=a[1],d=Object(r.useState)(0),j=Object(c.a)(d,2),b=j[0],f=j[1],O=Object(c.a)(s[b],3),m=O[0],x=O[1],w=O[2],k=Object(r.useState)(!1),S=Object(c.a)(k,2),N=S[0],D=S[1],L=(N?m:C(m)).join("\n"),M=(N?x:C(x)).join("\n"),E=w.join("\n"),R=s.some((function(e){var n=Object(c.a)(e,3);n[0],n[1];return n[2].length>0})),I=v(b,f,s.length);return Object(r.useEffect)((function(){l(y(n))}),[n]),Object(r.useEffect)((function(){b>=s.length-3&&s[s.length-1][0].length>0&&l(u())}),[b,s,u]),Object(p.jsxs)("div",{className:"interpreter",children:[Object(p.jsxs)("div",{className:"interpreterTitle",children:[Object(p.jsxs)("h3",{children:["Step ",b," - ",b>0?s[b-1][0][0]:"Start"]}),Object(p.jsxs)("button",{onClick:function(){return D(!N)},children:[N?"Hide":"Show"," nested instructions"]}),t?Object(p.jsx)("button",{onClick:t,children:"X"}):null]}),Object(p.jsxs)("div",{className:"interpreterEditors",children:[Object(p.jsx)(h,{value:L,language:"javascript",onKeyDown:function(e){return I(e.key)},options:{readOnly:!0,theme:"vs-dark",lineNumbers:function(e){return L.split("\n").length-e+1}}}),Object(p.jsx)(h,{value:M,className:"i2StackEditor",language:"javascript",onKeyDown:function(e){return I(e.key)},options:{readOnly:!0,theme:"vs-dark",lineNumbers:function(e){return M.split("\n").length-e+1}}}),R?Object(p.jsx)(h,{value:E,language:"javascript",onKeyDown:function(e){return I(e.key)},options:{readOnly:!0,theme:"vs-dark",lineNumbers:function(e){return(e-1).toString()}}}):null]}),Object(p.jsx)(g,{values:s,index:b,setIndex:f})]})};var M=function(e){var n=e.source,t=e.onClose,i=Object(r.useState)(S(n)),a=Object(c.a)(i,2),o=a[0],s=o.code,u=o.stepStream,l=u.steps,d=u.next,j=a[1],b=Object(r.useState)(0),f=Object(c.a)(b,2),O=f[0],m=f[1],x=Object(c.a)(l[O],3),w=x[0],k=x[1],y=x[2],N=function(e){return e.split("\n").map((function(e){return e.split(" ").slice(1).join(" ")})).filter((function(e){return e.length>0})).join("\n")}(s),D=k.join("\n"),C=y.join("\n"),L=l.some((function(e){var n=Object(c.a)(e,3);n[0],n[1];return n[2].length>0})),M=v(O,m,l.length);Object(r.useEffect)((function(){j(S(n))}),[n]),Object(r.useEffect)((function(){O===l.length-1&&"HALT"!==N.split("\n")[w]&&j({code:s,stepStream:d()})}),[O,s,d,w,N,l.length]);return Object(p.jsxs)("div",{className:"interpreter",children:[Object(p.jsxs)("div",{className:"interpreterTitle",children:[Object(p.jsxs)("h3",{children:["Step ",O," - "]}),t?Object(p.jsx)("button",{onClick:t,children:"X"}):null]}),Object(p.jsxs)("div",{className:"interpreterEditors",children:[Object(p.jsx)(h,{value:N,language:"javascript",onKeyDown:function(e){return M(e.key)},decorations:function(e,n){return e.revealRange(new n.Range(w,1,w,1)),[{range:new n.Range(w+1,1,w+1,1),options:{isWholeLine:!0,linesDecorationsClassName:"currentLineDec"}}]},options:{readOnly:!0,lineNumbers:function(e){return(e-1).toString()},theme:"vs-dark"}}),Object(p.jsx)(h,{value:D,language:"javascript",onKeyDown:function(e){return M(e.key)},options:{readOnly:!0,lineNumbers:function(e){return D.split("\n").length-e+1},minimap:{enabled:!1}}}),L?Object(p.jsx)(h,{value:C,language:"javascript",onKeyDown:function(e){return M(e.key)},options:{readOnly:!0,lineNumbers:function(e){return(e-1).toString()},theme:"vs-dark",minimap:{enabled:!1}}}):null]}),Object(p.jsx)(g,{values:l,index:O,setIndex:m})]})},E=t(40),R=t.n(E),I=t(29),H=t.n(I),K=t(41),W=t.n(K),A=t(42);H.a.use(W.a);function _(e){var n;switch(e){case"H_INT":n={shape:"square","background-color":"white"};break;case"H_BOOL":n={shape:"barrel","background-color":"purple"};break;case"H_CI":n={shape:"tag","background-color":"red"};break;case"H_HI":n={shape:"round-tag","background-color":"white"};break;case"H_HEADER":n={"background-color":"black"}}return n=Object(b.a)(Object(b.a)({},n),{},{"text-margin-y":"-10","text-justification":"left","text-wrap":"wrap",color:"green"})}var J=function(e){var n=e.source,t=e.onClose,i=Object(r.useState)(N(n)),a=Object(c.a)(i,2),o=a[0],s=o.code,u=o.stepStream,l=u.steps,d=u.next,j=a[1],b=s.join("\n"),f=Object(r.useState)(0),m=Object(c.a)(f,2),x=m[0],w=m[1],k=l[x],y=k.stack,S=k.cp,D=k.fp,C=k.heap,L=k.heap_graph,M=y.slice().reverse().map((function(e){return e.slice(6)})).join("\n"),E=S+1,I=y.length-D,H=C.join("\n"),K=l.some((function(e){return e.heap.length>0})),W=v(x,w,l.length);Object(r.useEffect)((function(){j(N(n))}),[n]),Object(r.useEffect)((function(){x===l.length-1&&"HALT"!==s[S].trim()&&j({code:s,stepStream:d()})}),[s,S,d,x,l.length]);var J=Object(r.useState)({heap:{show:!1,val:0},code:{showHeap:!1,heap:0}}),T=Object(c.a)(J,2),z=T[0],P=T[1],V=Object(c.a)(L,2),X=V[0],$=V[1],q=[].concat(Object(O.a)(X.map((function(e){return{data:e,style:_(e.tp[0])}}))),Object(O.a)($.map((function(e){return{data:e}})))),B=Object(A.a)((function(e){var n=e.target._private.data,t="H_CI"===n.tp[0],r={heap:{val:parseInt(n.id)+1,show:!0},code:{showHeap:t,heap:t?n.pointer+1:z.code.heap}};P(r)}),50),F=Object(A.a)((function(e){P({heap:{val:z.heap.val,show:!1},code:{showHeap:!1,heap:z.code.heap}})}),50);return Object(p.jsxs)("div",{className:"interpreter",children:[Object(p.jsxs)("div",{className:"interpreterTitle",children:[Object(p.jsxs)("h3",{children:["Step ",x," - "]}),t?Object(p.jsx)("button",{onClick:t,children:"X"}):null]}),Object(p.jsxs)("div",{className:"interpreterEditors",children:[Object(p.jsx)(h,{value:b,width:"33%",language:"javascript",onKeyDown:function(e){return W(e.key)},decorations:function(e,n){return e.revealRange(new n.Range(E,1,E,1)),e.setPosition({column:0,lineNumber:E}),[{range:new n.Range(E,1,E,1),options:{isWholeLine:!0,linesDecorationsClassName:"currentLineDec"}},{range:new n.Range(z.code.heap,1,z.code.heap,1),options:{isWholeLine:!0,linesDecorationsClassName:z.code.showHeap?"heapPointerDec":""}}]},options:{readOnly:!0,lineNumbers:function(e){return(e-1).toString()},theme:"vs-dark"}}),Object(p.jsx)(h,{value:M,language:"javascript",width:"33%",onKeyDown:function(e){return W(e.key)},decorations:function(e,n){return[{range:new n.Range(I,1,I,1),options:{isWholeLine:!0,linesDecorationsClassName:"framePointerDec"}}]},options:{readOnly:!0,lineNumbers:function(e){return(M.split("\n").length-e+1).toString()},minimap:{enabled:!1}}}),Object(p.jsxs)("div",{className:"jargonMem",children:[K?Object(p.jsx)(h,{value:H,height:"50%",decorations:function(e,n){return z.heap.show&&e.revealRange(new n.Range(z.heap.val,1,z.heap.val,1)),[{range:new n.Range(z.heap.val,1,z.heap.val,1),options:{isWholeLine:!0,linesDecorationsClassName:z.heap.show?"heapPointerDec":""}}]},language:"javascript",onKeyDown:function(e){return W(e.key)},options:{readOnly:!0,lineNumbers:function(e){return(e-1).toString()},theme:"vs-dark",minimap:{enabled:!1}}}):null,Object(p.jsx)(R.a,{id:"heap",elements:q,style:{height:"50%"},cy:function(e){return e.on("add","node",(function(n){e.layout({name:"klay",klay:{direction:"DOWN",borderSpacing:80,spacing:80}}).run(),e.fit(),e.on("mouseover","node",B),e.on("mouseout","node",F)}))}})]})]}),Object(p.jsx)(g,{values:l,index:x,setIndex:w})]})},T=(t(67),d.fib);var z=function(){var e=Object(r.useState)(T),n=Object(c.a)(e,2),t=n[0],i=n[1],a=Object(s.a)(t,1e3),o=Object(c.a)(a,1)[0],d=Object(r.useState)(""),b=Object(c.a)(d,2),f=b[0],v=b[1],g=Object(r.useState)(x(o)),m=Object(c.a)(g,2),y=m[0],S=m[1],N=D(y).slice(1,-1),C=Object(r.useState)(w(o)),E=Object(c.a)(C,2),R=E[0],I=E[1],H=D(R),K=Object(r.useState)(k(o)),W=Object(c.a)(K,2),A=W[0],_=W[1],z=D(A),P=Object(r.useState)(!1),V=Object(c.a)(P,2),X=V[0],$=V[1],q=Object(r.useState)(!1),B=Object(c.a)(q,2),F=B[0],Z=B[1],G=Object(r.useState)(!1),Q=Object(c.a)(G,2),U=Q[0],Y=Q[1],ee=Object(r.useState)({highlight:!1,line:0}),ne=Object(c.a)(ee,2),te=ne[0],re=ne[1],ie=Object(s.a)(te,50),ae=Object(c.a)(ie,1)[0],oe=function(e){return function(n,t){return ae.highlight?(r=e,i=ae.line,r.reduce((function(e,n,t){return n[0]===i?[t].concat(Object(O.a)(e)):e}),[])).map((function(e){return{range:new t.Range(e+1,1,e+1,1),options:{isWholeLine:!0,linesDecorationsClassName:"currentLineDec"}}})):[];var r,i}};j(["Escape"],(function(){$(!1),Z(!1),Y(!1)}));var ce=Object(u.b)();Object(r.useEffect)((function(){null===ce||void 0===ce||ce.editor.setTheme("vs-dark"),null===ce||void 0===ce||ce.languages.register({id:"Slang"}),null===ce||void 0===ce||ce.languages.setMonarchTokensProvider("Slang",l)}),[ce]),Object(r.useEffect)((function(){v(""),S(x(o)),I(w(o)),_(k(o))}),[o]);var se=function(e){return function(n){var t,r,i=null===n||void 0===n||null===(t=n.target)||void 0===t||null===(r=t.position)||void 0===r?void 0:r.lineNumber;null!==i&&void 0!==i&&re({line:e[i-1][0],highlight:!0})}},ue=function(){return re({highlight:!1,line:0})};return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsxs)("div",{className:"editorWrapper",children:[Object(p.jsx)("h4",{children:"Slang"}),Object(p.jsx)(h,{height:"86vh",defaultValue:o,defaultLanguage:"Slang",onMouseMove:function(e){var n,t,r=null===e||void 0===e||null===(n=e.target)||void 0===n||null===(t=n.position)||void 0===t?void 0:t.lineNumber;null!==r&&void 0!==r&&re({line:r,highlight:!0})},onMouseLeave:ue,decorations:function(e,n){return ae.highlight?[{range:new n.Range(ae.line,1,ae.line,1),options:{isWholeLine:!0,linesDecorationsClassName:"currentLineDec"}}]:[]},onChange:function(e,n){return i(void 0===e?"":e)},options:{theme:"vs-dark",minimap:{enabled:!1}}}),Object(p.jsx)("div",{className:"resultBox",children:Object(p.jsx)("button",{disabled:!!f,onClick:function(){return v((e=o,slang.interp0(e)));var e},children:""===f?"Compute Result":f})})]}),Object(p.jsxs)("div",{className:"editorWrapper",children:[Object(p.jsx)("h4",{children:"Interpreter 2"}),Object(p.jsx)(h,{defaultLanguage:"javascript",height:"86vh",value:N,onMouseMove:se(y),onMouseLeave:ue,decorations:oe(y),options:{tabSize:2,readOnly:!0,theme:"vs-dark",minimap:{enabled:!1}}}),Object(p.jsx)("button",{onClick:function(){return $(!X)},children:"Visualize Interpretation"})]}),Object(p.jsxs)("div",{className:"editorWrapper",children:[Object(p.jsx)("h4",{children:"Interpreter 3"}),Object(p.jsx)(h,{defaultLanguage:"javascript",value:H,onMouseMove:se(R),onMouseLeave:ue,decorations:oe(R),height:"86vh",options:{readOnly:!0,theme:"vs-dark",minimap:{enabled:!1}}}),Object(p.jsx)("button",{onClick:function(){return Z(!F)},children:"Visualize Interpretation"})]}),Object(p.jsxs)("div",{className:"editorWrapper",children:[Object(p.jsx)("h4",{children:"Jargon"}),Object(p.jsx)(h,{defaultLanguage:"javascript",value:z,onMouseMove:se(A),onMouseLeave:ue,decorations:oe(A),height:"86vh",options:{readOnly:!0,theme:"vs-dark",minimap:{enabled:!1}}}),Object(p.jsx)("button",{onClick:function(){return Y(!U)},children:"Visualize Interpretation"})]}),X?Object(p.jsx)(L,{source:o,onClose:function(){return $(!1)}}):null,F?Object(p.jsx)(M,{source:o,onClose:function(){return Z(!1)}}):null,U?Object(p.jsx)(J,{source:o,onClose:function(){return Y(!1)}}):null]})};o.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(z,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.98ab57eb.chunk.js.map