(this["webpackJsonpcompiler-explorer"]=this["webpackJsonpcompiler-explorer"]||[]).push([[0],{20:function(e,n,t){},49:function(e,n,t){},67:function(e,n,t){},68:function(e,n,t){"use strict";t.r(n);var r=t(0),i=t.n(r),a=t(28),o=t.n(a),c=(t(49),t(3)),s=t(72),u=t(24),l={keywords:["true","false","ref","inl","inr","fst","snd","case","of","if","then","else","let","fun","in","begin","end","while","do","()"],typeKeywords:["int","bool","unit","banter"],operators:[",",":",";","+","-","*","/","~","=",":=","<","&&","||","|","->","?","!","()"],symbols:/[=><!~?:&|+\-*/^%]+/,escapes:/\\/,tokenizer:{root:[[/[a-z_$][\w$]*/,{cases:{"@typeKeywords":"keyword","@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w$]*/,"type.identifier"],{include:"@whitespace"},[/[{}()[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/\d*\.\d+([eE][-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F]+/,"number.hex"],[/\d+/,"number"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],comment:[[/[^(*]+/,"comment"],[/\(\*/,"comment","@push"],["\\*\\)","comment","@pop"],[/[(*]/,"comment"]],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"],[/\(\*/,"comment","@comment"]]}},d={fib:"let fib( m : int) : int =\n    if m = 0\n    then 1\n    else if m = 1\n        then 1\n        else fib (m - 1) + fib (m -2)\n        end\n    end\nin\n    fib(1)\nend",fun:"(* the reason we need closures on the heap ... *) \n\nlet f(y : int) : int -> int =\n  let g(x :int) : int = y + x in g end\nin\n  let add21 : int -> int  = f(21) in\n      let add17 : int -> int  = f(17) in\n         add17(3) + add21(60)\n       end\n  end\nend",gcd:"let gcd(p : int * int) : int =\n    let m : int = fst p in\n       let  n : int = snd p in\n          if m = n\n          then m\n          else if m < n\n               then gcd(m, n - m)\n               else gcd(m - n, n)\n               end\n           end\n       end\n     end\nin\n   let x : int = 10 in\n      let  y : int = 2 in gcd(x, y) end\n    end\nend"},j=function(e,n){var t=Object(r.useRef)((function(){}));Object(r.useEffect)((function(){t.current=function(t){e.includes(t.key)&&(null===n||void 0===n||n(t))}}),[e,n]),Object(r.useEffect)((function(){var e=function(e){t.current(e)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[])},b=t(5),p=t(1),h=function(e){var n=Object(r.useState)({})[1],t=e.decorations,i=Object(r.useRef)(),a=Object(r.useRef)(),o=Object(r.useRef)(e.onMouseMove);o.current=e.onMouseMove;var c=Object(r.useRef)(e.onMouseLeave);c.current=e.onMouseLeave;var s=Object(r.useRef)(e.onKeyDown);return Object(r.useEffect)((function(){s.current=e.onKeyDown}),[e.onKeyDown]),Object(r.useEffect)((function(){t&&i.current&&a.current&&n((function(e){var n;return null===(n=i.current)||void 0===n?void 0:n.deltaDecorations(e,t(i.current,a.current))}))}),[t,n]),Object(p.jsx)(u.a,Object(b.a)(Object(b.a)({},e),{},{onMount:function(r,u){r.onMouseMove((function(e){o.current&&o.current(e)})),r.onMouseLeave((function(e){c.current&&c.current(e)})),e.onMount&&e.onMount(r,u),function(e,r){i.current=e,a.current=r,t&&n((function(e){var n;return null===(n=i.current)||void 0===n?void 0:n.deltaDecorations(e,t(i.current,a.current))}))}(r,u),r.onKeyDown((function(e){var n=e.browserEvent;s.current&&s.current(n)}))}}))},f=t(73);t(20);function v(e,n,t){return function(r){switch(r){case"ArrowRight":n(((e+1)%t+t)%t);break;case"ArrowLeft":n(((e-1)%t+t)%t)}}}var O=function(e){var n=e.values,t=e.index,r=e.setIndex,i=n.length,a=v(t,r,i);return j(["ArrowRight","ArrowLeft"],(function(e){return a(e.key)})),Object(p.jsxs)("div",{className:"progress",children:[Object(p.jsx)("button",{onClick:function(){return r(((t-1)%i+i)%i)},children:"<"}),Object(p.jsx)(f.a,{selectedIndex:t,values:n,appearance:"inverted",onSelect:function(e){var n=e.index;return r?r(n):null}}),Object(p.jsx)("button",{onClick:function(){return r(((t+1)%i+i)%i)},children:">"})]})},g=t(19),m=function(e){return JSON.parse(slang.interp2Code(e))},x=function(e){return JSON.parse(slang.interp3Code(e))},w=function(e){return JSON.parse(slang.jargonCode(e))},k=function(e){return JSON.parse(slang.interp2(e))},y=function(e){return JSON.parse(slang.interp3(e))},N=function(e){return JSON.parse(slang.jargon(e))};function S(e){return e.map((function(e){var n=Object(c.a)(e,2);n[0];return n[1]})).join("\n")}var D=function(e){return e.map((function(e,n){return e.length>40?e.split("\n").join(" ").slice(0,40)+"...":e}))},C=function(e){var n=e.source,t=e.onClose,i=Object(r.useState)(k(n)),a=Object(c.a)(i,2),o=a[0],s=a[1];Object(r.useEffect)((function(){s(k(n))}),[n]);var u=Object(r.useState)(0),l=Object(c.a)(u,2),d=l[0],j=l[1],b=Object(c.a)(o[d],3),f=b[0],g=b[1],m=b[2],x=Object(r.useState)(!1),w=Object(c.a)(x,2),y=w[0],N=w[1],S=(y?f:D(f)).join("\n"),C=(y?g:D(g)).join("\n"),L=m.join("\n"),M=o.some((function(e){var n=Object(c.a)(e,3);n[0],n[1];return n[2].length>0})),R=v(d,j,o.length);return Object(p.jsxs)("div",{className:"interpreter",children:[Object(p.jsxs)("div",{className:"interpreterTitle",children:[Object(p.jsxs)("h3",{children:["Step ",d," - ",d>0?o[d-1][0][0]:"Start"]}),Object(p.jsxs)("button",{onClick:function(){return N(!y)},children:[y?"Hide":"Show"," nested instructions"]}),t?Object(p.jsx)("button",{onClick:t,children:"X"}):null]}),Object(p.jsxs)("div",{className:"interpreterEditors",children:[Object(p.jsx)(h,{value:S,language:"javascript",onKeyDown:function(e){return R(e.key)},options:{readOnly:!0,theme:"vs-dark",lineNumbers:function(e){return S.split("\n").length-e+1}}}),Object(p.jsx)(h,{value:C,className:"i2StackEditor",language:"javascript",onKeyDown:function(e){return R(e.key)},options:{readOnly:!0,theme:"vs-dark",lineNumbers:function(e){return C.split("\n").length-e+1}}}),M?Object(p.jsx)(h,{value:L,language:"javascript",onKeyDown:function(e){return R(e.key)},options:{readOnly:!0,theme:"vs-dark",lineNumbers:function(e){return(e-1).toString()}}}):null]}),Object(p.jsx)(O,{values:o,index:d,setIndex:j})]})};var L=function(e){var n=e.source,t=e.onClose,i=Object(r.useState)(y(n)),a=Object(c.a)(i,2),o=a[0],s=a[1];Object(r.useEffect)((function(){s(y(n))}),[n]);var u=Object(c.a)(o,2),l=u[0],d=u[1];l=l.split("\n").map((function(e){return e.split(" ").slice(1).join(" ")})).filter((function(e){return e.length>0})).join("\n");var j=Object(r.useState)(0),b=Object(c.a)(j,2),f=b[0],g=b[1],m=Object(c.a)(d[f],3),x=m[0],w=m[1],k=m[2],N=w.join("\n"),S=k.join("\n"),D=d.some((function(e){var n=Object(c.a)(e,3);n[0],n[1];return n[2].length>0})),C=v(f,g,d.length);return Object(p.jsxs)("div",{className:"interpreter",children:[Object(p.jsxs)("div",{className:"interpreterTitle",children:[Object(p.jsxs)("h3",{children:["Step ",f," - "]}),t?Object(p.jsx)("button",{onClick:t,children:"X"}):null]}),Object(p.jsxs)("div",{className:"interpreterEditors",children:[Object(p.jsx)(h,{value:l,language:"javascript",onKeyDown:function(e){return C(e.key)},decorations:function(e,n){return e.revealRange(new n.Range(x,1,x,1)),[{range:new n.Range(x+1,1,x+1,1),options:{isWholeLine:!0,linesDecorationsClassName:"currentLineDec"}}]},options:{readOnly:!0,lineNumbers:function(e){return(e-1).toString()},theme:"vs-dark"}}),Object(p.jsx)(h,{value:N,language:"javascript",onKeyDown:function(e){return C(e.key)},options:{readOnly:!0,lineNumbers:function(e){return N.split("\n").length-e+1},minimap:{enabled:!1}}}),D?Object(p.jsx)(h,{value:S,language:"javascript",onKeyDown:function(e){return C(e.key)},options:{readOnly:!0,lineNumbers:function(e){return(e-1).toString()},theme:"vs-dark",minimap:{enabled:!1}}}):null]}),Object(p.jsx)(O,{values:o[1],index:f,setIndex:g})]})},M=t(40),R=t.n(M),E=t(29),I=t.n(E),K=t(41),H=t.n(K),W=t(42);I.a.use(H.a);function J(e){var n;switch(e){case"H_INT":n={shape:"square","background-color":"white"};break;case"H_BOOL":n={shape:"barrel","background-color":"purple"};break;case"H_CI":n={shape:"tag","background-color":"red"};break;case"H_HI":n={shape:"round-tag","background-color":"white"};break;case"H_HEADER":n={"background-color":"black"}}return n=Object(b.a)(Object(b.a)({},n),{},{"text-margin-y":"-10","text-justification":"left","text-wrap":"wrap",color:"green"})}var _=function(e){var n=e.source,t=e.onClose,i=Object(r.useState)(N(n)),a=Object(c.a)(i,2),o=a[0],s=a[1];Object(r.useEffect)((function(){s(N(n))}),[n]);var u=Object(c.a)(o,2),l=u[0],d=u[1],j=l.join("\n"),b=Object(r.useState)(0),f=Object(c.a)(b,2),m=f[0],x=f[1],w=d[m],k=w.stack,y=w.cp,S=w.fp,D=w.heap,C=w.heap_graph,L=k.slice().reverse().map((function(e){return e.slice(6)})).join("\n"),M=y+1,E=k.length-S,I=D.join("\n"),K=d.some((function(e){return e.heap.length>0})),H=Object(r.useState)({heap:{show:!1,val:0},code:{showHeap:!1,heap:0}}),_=Object(c.a)(H,2),A=_[0],z=_[1],T=v(m,x,d.length),P=Object(c.a)(C,2),V=P[0],X=P[1],$=[].concat(Object(g.a)(V.map((function(e){return{data:e,style:J(e.tp[0])}}))),Object(g.a)(X.map((function(e){return{data:e}})))),q=Object(W.a)((function(e){var n=e.target._private.data,t="H_CI"===n.tp[0],r={heap:{val:parseInt(n.id)+1,show:!0},code:{showHeap:t,heap:t?n.pointer+1:A.code.heap}};z(r)}),50),B=Object(W.a)((function(e){z({heap:{val:A.heap.val,show:!1},code:{showHeap:!1,heap:A.code.heap}})}),50);return Object(p.jsxs)("div",{className:"interpreter",children:[Object(p.jsxs)("div",{className:"interpreterTitle",children:[Object(p.jsxs)("h3",{children:["Step ",m," - "]}),t?Object(p.jsx)("button",{onClick:t,children:"X"}):null]}),Object(p.jsxs)("div",{className:"interpreterEditors",children:[Object(p.jsx)(h,{value:j,width:"33%",language:"javascript",onKeyDown:function(e){return T(e.key)},decorations:function(e,n){return e.revealRange(new n.Range(M,1,M,1)),e.setPosition({column:0,lineNumber:M}),[{range:new n.Range(M,1,M,1),options:{isWholeLine:!0,linesDecorationsClassName:"currentLineDec"}},{range:new n.Range(A.code.heap,1,A.code.heap,1),options:{isWholeLine:!0,linesDecorationsClassName:A.code.showHeap?"heapPointerDec":""}}]},options:{readOnly:!0,lineNumbers:function(e){return(e-1).toString()},theme:"vs-dark"}}),Object(p.jsx)(h,{value:L,language:"javascript",width:"33%",onKeyDown:function(e){return T(e.key)},decorations:function(e,n){return[{range:new n.Range(E,1,E,1),options:{isWholeLine:!0,linesDecorationsClassName:"framePointerDec"}}]},options:{readOnly:!0,lineNumbers:function(e){return(L.split("\n").length-e+1).toString()},minimap:{enabled:!1}}}),Object(p.jsxs)("div",{className:"jargonMem",children:[K?Object(p.jsx)(h,{value:I,height:"50%",decorations:function(e,n){return A.heap.show&&e.revealRange(new n.Range(A.heap.val,1,A.heap.val,1)),[{range:new n.Range(A.heap.val,1,A.heap.val,1),options:{isWholeLine:!0,linesDecorationsClassName:A.heap.show?"heapPointerDec":""}}]},language:"javascript",onKeyDown:function(e){return T(e.key)},options:{readOnly:!0,lineNumbers:function(e){return(e-1).toString()},theme:"vs-dark",minimap:{enabled:!1}}}):null,Object(p.jsx)(R.a,{id:"heap",elements:$,style:{height:"50%"},cy:function(e){return e.on("add","node",(function(n){e.layout({name:"klay",klay:{direction:"DOWN",borderSpacing:80,spacing:80}}).run(),e.fit(),e.on("mouseover","node",q),e.on("mouseout","node",B)}))}})]})]}),Object(p.jsx)(O,{values:o[1],index:m,setIndex:x})]})},A=(t(67),d.fib);var z=function(){var e=Object(r.useState)(A),n=Object(c.a)(e,2),t=n[0],i=n[1],a=Object(s.a)(t,1e3),o=Object(c.a)(a,1)[0],d=Object(r.useState)(""),b=Object(c.a)(d,2),f=b[0],v=b[1],O=Object(r.useState)(m(o)),k=Object(c.a)(O,2),y=k[0],N=k[1],D=S(y).slice(1,-1),M=Object(r.useState)(x(o)),R=Object(c.a)(M,2),E=R[0],I=R[1],K=S(E),H=Object(r.useState)(w(o)),W=Object(c.a)(H,2),J=W[0],z=W[1],T=S(J),P=Object(r.useState)(!1),V=Object(c.a)(P,2),X=V[0],$=V[1],q=Object(r.useState)(!1),B=Object(c.a)(q,2),F=B[0],Z=B[1],G=Object(r.useState)(!1),Q=Object(c.a)(G,2),U=Q[0],Y=Q[1],ee=Object(r.useState)({highlight:!1,line:0}),ne=Object(c.a)(ee,2),te=ne[0],re=ne[1],ie=Object(s.a)(te,50),ae=Object(c.a)(ie,1)[0],oe=function(e){return function(n,t){return ae.highlight?(r=e,i=ae.line,r.reduce((function(e,n,t){return n[0]===i?[t].concat(Object(g.a)(e)):e}),[])).map((function(e){return{range:new t.Range(e+1,1,e+1,1),options:{isWholeLine:!0,linesDecorationsClassName:"currentLineDec"}}})):[];var r,i}};j(["Escape"],(function(){$(!1),Z(!1),Y(!1)}));var ce=Object(u.b)();Object(r.useEffect)((function(){null===ce||void 0===ce||ce.editor.setTheme("vs-dark"),null===ce||void 0===ce||ce.languages.register({id:"Slang"}),null===ce||void 0===ce||ce.languages.setMonarchTokensProvider("Slang",l)}),[ce]),Object(r.useEffect)((function(){v(""),N(m(o)),I(x(o)),z(w(o))}),[o]);var se=function(e){return function(n){var t,r,i=null===n||void 0===n||null===(t=n.target)||void 0===t||null===(r=t.position)||void 0===r?void 0:r.lineNumber;null!==i&&void 0!==i&&re({line:e[i-1][0],highlight:!0})}},ue=function(){return re({highlight:!1,line:0})};return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsxs)("div",{className:"editorWrapper",children:[Object(p.jsx)("h4",{children:"Slang"}),Object(p.jsx)(h,{height:"86vh",defaultValue:o,defaultLanguage:"Slang",onMouseMove:function(e){var n,t,r=null===e||void 0===e||null===(n=e.target)||void 0===n||null===(t=n.position)||void 0===t?void 0:t.lineNumber;null!==r&&void 0!==r&&re({line:r,highlight:!0})},onMouseLeave:ue,decorations:function(e,n){return ae.highlight?[{range:new n.Range(ae.line,1,ae.line,1),options:{isWholeLine:!0,linesDecorationsClassName:"currentLineDec"}}]:[]},onChange:function(e,n){return i(void 0===e?"":e)},options:{theme:"vs-dark",minimap:{enabled:!1}}}),Object(p.jsx)("div",{className:"resultBox",children:Object(p.jsx)("button",{disabled:!!f,onClick:function(){return v((e=o,slang.interp0(e)));var e},children:""===f?"Compute Result":f})})]}),Object(p.jsxs)("div",{className:"editorWrapper",children:[Object(p.jsx)("h4",{children:"Interpreter 2"}),Object(p.jsx)(h,{defaultLanguage:"javascript",height:"86vh",value:D,onMouseMove:se(y),onMouseLeave:ue,decorations:oe(y),options:{tabSize:2,readOnly:!0,theme:"vs-dark",minimap:{enabled:!1}}}),Object(p.jsx)("button",{onClick:function(){return $(!X)},children:"Visualize Interpretation"})]}),Object(p.jsxs)("div",{className:"editorWrapper",children:[Object(p.jsx)("h4",{children:"Interpreter 3"}),Object(p.jsx)(h,{defaultLanguage:"javascript",value:K,onMouseMove:se(E),onMouseLeave:ue,decorations:oe(E),height:"86vh",options:{readOnly:!0,theme:"vs-dark",minimap:{enabled:!1}}}),Object(p.jsx)("button",{onClick:function(){return Z(!F)},children:"Visualize Interpretation"})]}),Object(p.jsxs)("div",{className:"editorWrapper",children:[Object(p.jsx)("h4",{children:"Jargon"}),Object(p.jsx)(h,{defaultLanguage:"javascript",value:T,onMouseMove:se(J),onMouseLeave:ue,decorations:oe(J),height:"86vh",options:{readOnly:!0,theme:"vs-dark",minimap:{enabled:!1}}}),Object(p.jsx)("button",{onClick:function(){return Y(!U)},children:"Visualize Interpretation"})]}),X?Object(p.jsx)(C,{source:o,onClose:function(){return $(!1)}}):null,F?Object(p.jsx)(L,{source:o,onClose:function(){return Z(!1)}}):null,U?Object(p.jsx)(_,{source:o,onClose:function(){return Y(!1)}}):null]})};o.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(z,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.b88173e4.chunk.js.map